<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Soulink · Match Lab</title>
  <link rel="stylesheet" href="style.css"/>
  <style>
    /* --- Page title guards --- */
    .page-title{font-size:clamp(20px,2.2vw,28px);margin:0 0 8px}
    .page-sub{opacity:.9;margin:0 0 16px}

    /* Container width */
    .container.container--match{max-width:1200px;margin-inline:auto;padding-inline:clamp(16px,4vw,24px);padding-block:clamp(12px,3vw,24px)}

    /* Snapshot + Filters layout */
    .layout{display:grid;gap:clamp(12px,2.4vw,18px)}
    @media (min-width:1024px){.layout{grid-template-columns:1.1fr .9fr;align-items:start}}

    /* Filters: sticky desktop, drawer mobile */
    #filtersPanel.filters-panel{position:sticky;top:84px;align-self:start}
    .only-mobile{display:none}
    @media (max-width:767px){
      .only-mobile{display:inline-flex}
      #filtersPanel.filters-panel{
        position:fixed; inset:0 0 0 auto; width:min(88vw,360px);
        transform:translateX(100%); transition:transform .25s ease;
        background:#082e33; z-index:60; padding:16px; box-shadow:-16px 0 40px rgba(0,0,0,.35)
      }
      #filtersPanel.open{transform:translateX(0)}
    }
    @media (prefers-reduced-motion:reduce){#filtersPanel.filters-panel{transition:none}}

    /* Cards grid (3/2/1) */
    .cards{display:grid;gap:14px}
    @media (min-width:1280px){.cards{grid-template-columns:repeat(3,minmax(0,1fr))}}
    @media (min-width:768px) and (max-width:1279px){.cards{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media (max-width:767px){.cards{grid-template-columns:1fr}}

    /* Nav spalvos – kad sutaptų su kitais puslapiais */
    header a, .navbar a, .nav-links a, nav a{color:var(--fg)!important}
    .navbar .nav-links a[aria-current="page"],
    nav a[aria-current="page"]{
      background:rgba(0,253,216,.14)!important;
      box-shadow:inset 0 0 0 1px var(--border),0 0 18px rgba(0,253,216,.15)!important;
      border-radius:10px
    }
  </style>
</head>

<body data-page="match">
  <!-- Star background -->
  <div class="starfield" aria-hidden="true"></div>

  <!-- NAV – tokia pati kaip kituose (My Soul) -->
  <nav class="navbar" role="navigation" aria-label="Main">
    <div class="nav-inner">
      <div class="brand">Soulink</div>
      <div class="nav-links" aria-label="Primary">
        <a href="index.html">Home</a>
        <a href="quiz.html">Quiz</a>
        <a href="edit-profile.html">Edit Profile</a>
        <a href="my-soul.html">My Soul</a>
        <a href="soul-chart.html">Soul Chart</a>
        <a href="soul-coach.html" data-nav="coach">Soul Coach</a>
        <a href="match.html" data-nav="match" aria-current="page">Match</a>
        <a href="friends.html" data-nav="friends">Friends</a>
        <a href="result.html" data-nav="results">Results</a>
        <a href="login.html">Log In</a>
        <a href="signup.html">Sign Up</a>
        <a href="#" id="logoutLink">Log Out</a>
      </div>
      <div class="hamburger"><button id="openDrawer" aria-label="Open menu">☰ Menu</button></div>
    </div>
  </nav>

  <!-- MOBILE DRAWER -->
  <div class="drawer" id="drawer" aria-hidden="true">
    <div class="backdrop" id="drawerBackdrop" tabindex="-1" aria-label="Close"></div>
    <aside class="panel" role="dialog" aria-modal="true" aria-label="Navigation">
      <a href="index.html">Home</a>
      <a href="quiz.html">Quiz</a>
      <a href="edit-profile.html">Edit Profile</a>
      <a href="my-soul.html">My Soul</a>
      <a href="soul-chart.html">Soul Chart</a>
      <a href="soul-coach.html" data-nav="coach">Soul Coach</a>
      <a href="match.html" data-nav="match" aria-current="page">Match</a>
      <a href="friends.html" data-nav="friends">Friends</a>
      <a href="result.html" data-nav="results">Results</a>
      <a href="login.html">Log In</a>
      <a href="signup.html">Sign Up</a>
      <a href="#" id="logoutLinkMobile">Log Out</a>
      <button class="btn ghost" id="closeDrawer" style="margin-top:8px">Close</button>
    </aside>
  </div>

  <main class="container container--match">
    <h1 class="page-title">Match Lab ✨</h1>
    <p class="page-sub">See who resonates with your Connection, Love Language, Hobbies and Values. Hover or tap each card for details.</p>

    <div class="layout">
      <!-- Snapshot -->
      <section class="panel snapshot">
        <h3>Your Snapshot</h3>
        <div class="pills">
          <span class="pill"><b>Connection:</b> <span id="me-ct">–</span></span>
          <span class="pill"><b>Love Language:</b> <span id="me-ll">–</span></span>
        </div>
        <div style="margin-top:8px"><b>Hobbies</b><div id="me-hobbies">–</div></div>
        <div style="margin-top:8px"><b>Values</b><div id="me-values">–</div></div>
      </section>

      <!-- Filters -->
      <aside id="filtersPanel" class="panel filters-panel">
        <h3>Filters</h3>
        <div class="row" style="display:grid;grid-template-columns:1fr;gap:10px">
          <input id="f-search" type="text" placeholder="Search name, notes, socials…" />
          <label>Connection</label>
          <select id="f-ct">
            <option>Any</option>
            <option>Romantic</option>
            <option>Friendship</option>
            <option>Both</option>
          </select>

          <div class="row" style="display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center">
            <label>Min score</label><span id="minLabel" class="hint"></span>
            <input id="f-min" type="range" min="0" max="100" step="5" value="0"/>
          </div>

          <div class="row" style="display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center">
            <label>Love Language weight</label><span id="llw-label" class="hint">1.0×</span>
            <input id="f-llw" type="range" min="0" max="2" step="0.1" value="1"/>
          </div>

          <div class="row" style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
            <button id="btn-reset" class="btn ghost" aria-label="Reset filters">Reset</button>
            <button class="btn ghost only-mobile" id="filtersCloseBtn" type="button">Close</button>
          </div>
        </div>
      </aside>
    </div>

    <!-- Cards -->
    <section id="results" class="cards"></section>
    <p id="empty" class="hint" style="display:none;margin:8px 0 0">No matches yet. Add people in <a href="friends.html">Friends</a> ✨</p>

    <!-- CTA -->
    <div class="page-cta" style="display:flex;gap:12px;justify-content:space-between;margin:24px 0">
      <a class="btn ghost" href="soul-coach.html">← Back: Soul Coach</a>
      <a class="btn" href="friends.html">Next → Friends</a>
    </div>
  </main>

  <footer class="container container--match" style="padding-top:8px;border-top:1px solid rgba(255,255,255,.08);opacity:.9">
    © 2025 Soulink.global | Created with love by Soulink Team
  </footer>

  <script src="match.js" defer></script>

  <!-- small helpers: nav active + filters drawer + live labels -->
  <script>
    (()=>{ // mark active nav
      const page = document.body.dataset.page || 'match';
      document.querySelectorAll('.nav-links a[data-nav]').forEach(a=>{
        if(a.dataset.nav===page){ a.setAttribute('aria-current','page'); }
      });
    })();
    (()=>{ // drawer (mobile)
      const t = document.getElementById('filtersToggle') || document.querySelector('.only-mobile');
      const p = document.getElementById('filtersPanel');
      const c = document.getElementById('filtersCloseBtn');
      function toggle(){ p.classList.toggle('open'); }
      t?.addEventListener('click', toggle);
      c?.addEventListener('click', toggle);
    })();
    (()=>{ // live labels
      const r=document.getElementById('f-min'), lab=document.getElementById('minLabel');
      const w=document.getElementById('f-llw'), wlab=document.getElementById('llw-label');
      const U=()=>{ if(r&&lab) lab.textContent = (r.value||'0') + '%'; if(w&&wlab) wlab.textContent = (Number(w.value||1)).toFixed(1)+'×'; };
      U(); r?.addEventListener('input',U); w?.addEventListener('input',U);
    })();
  </script>
</body>
</html>

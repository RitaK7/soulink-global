<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Soulink · Match Lab</title>
  <link rel="stylesheet" href="style.css" />
</head>

<!-- IMPORTANT: page id -->
<body data-page="match">
  <!-- Unified top navigation -->
  <nav class="topnav" role="navigation" aria-label="Main">
    <div class="topnav__inner">
      <div class="brand">Soulink</div>
      <div class="topnav__links">
        <a data-nav="coach"   href="soul-coach.html">Soul Coach</a>
        <a data-nav="match"   href="match.html">Match</a>
        <a data-nav="friends" href="friends.html">Friends</a>
        <a data-nav="results" href="result.html">Results</a>
      </div>
      <div class="topnav__auth">
        <a href="login.html">Log In</a>
        <a href="signup.html">Sign Up</a>
        <a href="#" id="logoutLink">Log Out</a>
      </div>

      <!-- mobile filters toggle lives here on small screens -->
      <button id="filtersToggle" class="btn ghost topnav__filtersBtn" aria-controls="filtersPanel" aria-expanded="false">
        ☰ Filters
      </button>
    </div>
  </nav>

  <main class="container">
    <header class="pagehead">
      <h1>Match Lab</h1>
      <p class="muted">Tune your filters and discover glowing matches.</p>
    </header>

    <!-- Filters drawer / panel -->
    <aside id="filtersPanel" class="filtersPanel" aria-hidden="true">
      <div class="filtersPanel__inner">
        <h2>Filters</h2>
        <!-- keep your existing filter controls here -->
        <div class="filters__row">
          <button id="applyFilters" class="btn primary">Apply</button>
          <button id="closeFilters" class="btn ghost">Close</button>
        </div>
      </div>
    </aside>

    <!-- Match grid (your cards rendering stays the same) -->
    <section class="matches">
      <div id="matchGrid" class="matchGrid" aria-live="polite">
        <!-- your JS (match.js) fills cards here -->
      </div>
    </section>

    <!-- Pager -->
    <nav class="pager">
      <a class="btn ghost" href="soul-coach.html">← Back</a>
      <a class="btn primary" href="friends.html">Next → Friends</a>
    </nav>
  </main>

  <footer class="sitefooter">
    © 2025 Soulink.global | Created with love by Soulink Team
  </footer>

  <script src="match.js" defer></script>

  <!-- Minimal nav + drawer activator -->
  <script>
    (function () {
      // set active nav via data-page/data-nav
      const page = document.body.dataset.page;
      document.querySelectorAll('.topnav a[data-nav]').forEach(a => {
        if (a.dataset.nav === page) a.setAttribute('data-active', '1');
      });

      // filters drawer (unique IDs)
      const toggleBtn = document.getElementById('filtersToggle');
      const panel     = document.getElementById('filtersPanel');
      const closeBtn  = document.getElementById('closeFilters');

      const openPanel = () => {
        panel.classList.add('open');
        panel.setAttribute('aria-hidden', 'false');
        toggleBtn.setAttribute('aria-expanded', 'true');
        document.body.classList.add('no-scroll');
      };
      const closePanel = () => {
        panel.classList.remove('open');
        panel.setAttribute('aria-hidden', 'true');
        toggleBtn.setAttribute('aria-expanded', 'false');
        document.body.classList.remove('no-scroll');
      };

      toggleBtn?.addEventListener('click', () => {
        panel.classList.contains('open') ? closePanel() : openPanel();
      });
      closeBtn?.addEventListener('click', closePanel);
      panel?.addEventListener('click', (e) => {
        if (e.target === panel) closePanel(); // click on backdrop
      });
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closePanel(); });

      // optional: logout clears storage (kept from other pages)
      document.getElementById('logoutLink')?.addEventListener('click',(e)=>{
        e.preventDefault(); localStorage.clear(); location.href='index.html';
      });
    })();
  </script>
</body>
</html>
